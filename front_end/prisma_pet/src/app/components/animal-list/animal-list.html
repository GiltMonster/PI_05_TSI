<section class="list_pet_container" aria-label="Lista de animais">
  <h1 class="list_title">Animais</h1>

  <div class="header_list_pet">
    <form class="search" role="search" (submit)="onSubmit($event)">
      <label class="sr-only" for="petSearch">Buscar animais</label>
      <input id="petSearch" class="search__input" type="search" placeholder="Buscar Animal" autocomplete="off"
        aria-describedby="Buscar Animal" [(ngModel)]="searchValue" name="searchValue" (ngModelChange)="onSearch()" />

      @if(searchValue !== "") {
      <button type="button" class="search__clear" aria-label="Limpar busca" (click)="clearSearch()">
        <mat-icon aria-hidden="true">close</mat-icon>
      </button>
      }

      <button type="submit" class="search__btn" aria-label="Buscar">
        <mat-icon aria-hidden="true">search</mat-icon>
      </button>

      <span id="Buscar Animais" class="sr-only" aria-live="polite">{{ statusMsg }}</span>
    </form>

    @if (typeUser === 'admin') {
    <button class="add_pet_button" type="button" aria-label="Cadastrar novo animal" (click)="openCreateModal()">
      <mat-icon aria-hidden="true">add</mat-icon>
      <span>Cadastrar Novo Animal</span>
    </button>
    }
  </div>

  @if (!filteredPets || filteredPets.length === 0){
  <div class="empty" role="note" aria-live="polite">
    {{ emptyMessage }}
  </div>

  } @if (filteredPets.length) {
  <ul class="grid" role="list">
    @for (pet of pagedPets; track pet.id) {
    <li class="grid__item" role="listitem">
      <app-animal-card [userPet]="pet" [typeUser]="typeUser" (petDeleted)="onPetDeleted($event)" />
    </li>
    }
  </ul>
  <mat-paginator
    class="paginator"
    [length]="filteredPets.length"
    [pageSize]="pageSize"
    [pageIndex]="pageIndex"
    [pageSizeOptions]="[5, 10, 20]"
    (page)="onPageChange($event)"
    [ariaLabel]="'Paginação da lista de animais'"
    [showFirstLastButtons]="true">
  </mat-paginator>
}

  @if (createModalOpen) {
  <app-modal-create-pet *ngIf="createModalOpen" (close)="closeCreateModal()" (save)="handlePetCreated($event)">
  </app-modal-create-pet>
  }
</section>
