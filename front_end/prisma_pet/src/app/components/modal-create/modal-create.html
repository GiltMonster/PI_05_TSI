<div class="modal-backdrop">
  <div class="modal-content">
    <h2 #modalTitle class="form-section__title" tabindex="-1">Cadastrar novo Usuário</h2>

    <form aria-label="Formulário de dados pessoais" (ngSubmit)="onSave()">
      <div class="form-grid">
        <!-- Nome -->
        <div class="form-group">
          <label for="nome" class="form-label form-label--required"> Nome Completo </label>
          <input
            type="text"
            id="nome"
            name="nome"
            class="form-input"
            [(ngModel)]="createUser.name"
            required
            aria-required="true"
            autocomplete="name"
            placeholder="Digite o nome..."
          />
        </div>

        <!-- CPF -->
        <div class="form-group">
          <label for="cpf" [class]="class_is_required">CPF</label>
          <input
            type="text"
            id="cpf"
            name="cpf"
            class="form-input"
            [(ngModel)]="createUser.cpf"
            (input)="applyCpfMask($event)"
            maxlength="14"
            aria-required="true"
            required="{{ userType !== 'admin' ? true : false }}"
            pattern="\d{3}\.\d{3}\.\d{3}-\d{2}"
            title="Formato: 000.000.000-00"
            placeholder="Digite o CPF..."
          />
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email" class="form-label form-label--required">E-mail</label>
          <input
            type="email"
            id="email"
            name="email"
            class="form-input"
            [(ngModel)]="createUser.email"
            required
            aria-required="true"
            autocomplete="email"
            placeholder="email@exemplo.com"
          />
        </div>

        <!-- Senha -->
        <div class="form-group">
          <label for="senha" class="form-label form-label--required">Senha</label>
          <input
            type="password"
            id="senha"
            name="senha"
            class="form-input"
            [(ngModel)]="createUser.password"
            required
            autocomplete="new-password"
            placeholder="Crie uma senha..."
          />
        </div>

        <!-- Confirmar Senha -->
        <div class="form-group">
          <label for="confirmSenha" class="form-label form-label--required">
            Confirmar Senha
          </label>
          <input
            type="password"
            id="confirmSenha"
            name="confirmSenha"
            class="form-input"
            [(ngModel)]="confirmPassword"
            required
            autocomplete="new-password"
            placeholder="Repita a senha..."
          />
        </div>

        <!-- Telefone -->
        <div class="form-group">
          <label for="telefone" class="form-label">Telefone</label>
          <input
            type="tel"
            id="telefone"
            name="telefone"
            class="form-input"
            [(ngModel)]="createUser.phone"
            (input)="applyTelephoneMask($event)"
            maxlength="15"
            autocomplete="tel"
            pattern="\(\d{2}\) \d{5}-\d{4}"
            title="Formato: (00) 00000-0000"
            placeholder="Digite o telefone..."
          />
        </div>

        <!-- Pix (apenas vet) -->
        @if (userType === 'vet') {
        <div class="form-group">
          <label for="numero" [class]="class_is_required">Pix</label>
          <input
            type="text"
            id="numero"
            name="numero"
            class="form-input"
            [(ngModel)]="createUser.pix"
            required="{{ userType === 'vet' ? true : false }}"
            placeholder="Digite o Pix..."
          />
        </div>
        }

        <!-- CRMV (apenas vet) -->
        @if (userType === 'vet') {
        <div class="form-group">
          <label for="crmv" [class]="class_is_required">CRMV</label>
          <input
            type="text"
            id="crmv"
            name="crmv"
            class="form-input"
            [(ngModel)]="createUser.crmv"
            required="{{ userType === 'vet' ? true : false }}"
            placeholder="Digite o CRMV..."
          />
        </div>
        }

        <!-- ESPECIALIDADE (apenas vet) -->
        @if (userType === 'vet') {
        <div class="form-group">
          <label for="especialidade_vet" class="form-label">Especialidade</label>
          <select
            id="especialidade_vet"
            name="especialidade_vet"
            class="form-input"
            [(ngModel)]="createUser.especialidade_vet"
          >
            <option value="">Selecione a especialidade...</option>
            <option *ngFor="let especialidade of especialidade_vet" [value]="especialidade">
              {{ especialidade }}
            </option>
          </select>
        </div>
        }

        <!-- CEP -->
        <div [class]="class_group_full_option">
          <label for="cep" class="form-label">CEP</label>
          <input
            type="text"
            id="cep"
            name="cep"
            class="form-input"
            [(ngModel)]="createUser.cep"
            autocomplete="postal-code"
            (focusout)="findCEP(createUser.cep)"
            pattern="\d{5}-\d{3}"
            (input)="applyMaskcCEP($event)"
            title="Formato: 00000-000"
            placeholder="Digite seu CEP..."
            maxlength="9"
          />
        </div>

        <!-- Endereço -->
        <div class="form-group">
          <label for="endereco" class="form-label">Endereço</label>
          <input
            type="text"
            id="endereco"
            name="endereco"
            class="form-input"
            [(ngModel)]="createUser.endereco"
            autocomplete="street-address"
            placeholder="Rua, Avenida, etc."
          />
        </div>

        <!-- Bairro -->
        <div class="form-group">
          <label for="bairro" class="form-label">Bairro</label>
          <input
            type="text"
            id="bairro"
            name="bairro"
            class="form-input"
            [(ngModel)]="createUser.bairro"
            placeholder="Bairro"
          />
        </div>

        <!-- Cidade -->
        <div class="form-group">
          <label for="cidade" class="form-label">Cidade</label>
          <input
            type="text"
            id="cidade"
            name="cidade"
            class="form-input"
            [(ngModel)]="createUser.cidade"
            autocomplete="address-level2"
            placeholder="Digite sua cidade..."
          />
        </div>

        <!-- Complemento -->
        <div class="form-group">
          <label for="complemento" class="form-label">Complemento</label>
          <input
            type="text"
            id="complemento"
            name="complemento"
            class="form-input"
            [(ngModel)]="createUser.complemento"
            placeholder="Apto, bloco, etc."
          />
        </div>
      </div>

      <!-- Buttons -->
      <div class="button-group">
        <button type="button" class="btn btn--secondary" (click)="onCancel()">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
          Cancelar
        </button>
        <button type="submit" class="btn btn--primary">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Cadastrar novo Usuário
        </button>
      </div>

      <div class="loading-overlay" *ngIf="loading">
        <app-loading></app-loading>
      </div>
    </form>
  </div>
</div>
