<div class="modal-backdrop">
  <div class="modal-content">
    <h2 class="form-section__title">Cadastrar novo Animal</h2>

    <form aria-label="Formulário de cadastro de animal" (ngSubmit)="onSave()">
      <div class="form-grid">
        <!-- Nome -->
        <div class="form-group">
          <label for="nome" class="form-label form-label--required">
            Nome do Animal
          </label>
          <input
            type="text"
            id="nome"
            name="nome"
            class="form-input"
            [(ngModel)]="createPet.nome"
            required
            aria-required="true"
            autocomplete="off"
            placeholder="Digite o nome do animal..."
          />
        </div>

        <!-- Espécie -->
        <div class="form-group">
          <label for="especie" class="form-label form-label--required">Espécie</label>
          <select
            id="especie"
            name="especie"
            class="form-input"
            [(ngModel)]="createPet.especie"
          >
            <option value="">Selecione a espécie...</option>
            <option *ngFor="let especie of especies" [value]="especie">
              {{ especie }}
            </option>
          </select>
        </div>

        <!-- Raça -->
        <div class="form-group">
          <label for="raca" class="form-label">Raça</label>
          <input
            type="text"
            id="raca"
            name="raca"
            class="form-input"
            [(ngModel)]="createPet.raca"
            placeholder="Ex.: SRD, Poodle, Siamês..."
          />
        </div>

          <!-- Idade -->
          <div class="form-group">
            <label for="idade" class="form-label">Idade</label>
            <input
              type="number"
              id="idade"
              name="idade"
              class="form-input"
              [(ngModel)]="idade"
              min="0"
              max="40"
              placeholder="Ex: 5 anos"
            />
          </div>


        <!-- Sexo -->
        <div class="form-group">
          <label class="form-label">Sexo</label>
          <div class="form-radio-group">
            <label>
              <input
                type="radio"
                name="sexo"
                [value]="true"
                [(ngModel)]="createPet.sexo"
              />
              Macho
            </label>
            <label>
              <input
                type="radio"
                name="sexo"
                [value]="false"
                [(ngModel)]="createPet.sexo"
              />
              Fêmea
            </label>
          </div>
        </div>

        <!-- Peso -->
        <div class="form-group">
          <label for="peso" class="form-label">Peso (kg)</label>
          <input
            type="number"
            step="0.01"
            id="peso"
            name="peso"
            class="form-input"
            [(ngModel)]="createPet.peso"
            placeholder="Ex.: 5.4"
          />
        </div>

        <!-- Temperamento -->
        <div class="form-group">
          <label for="temperamento" class="form-label">Temperamento</label>
          <input
            type="text"
            id="temperamento"
            name="temperamento"
            class="form-input"
            [(ngModel)]="createPet.temperamento"
            placeholder="Dócil, reativo, medroso..."
          />
        </div>

        <!-- Cor da Pelagem -->
        <div class="form-group">
          <label for="cor_pelagem" class="form-label">Cor da Pelagem</label>
          <input
            type="text"
            id="cor_pelagem"
            name="cor_pelagem"
            class="form-input"
            [(ngModel)]="createPet.cor_pelagem"
            placeholder="Ex.: Branco, Tigrado, Preto com manchas..."
          />
        </div>

        <!-- Castrado -->
        <div class="form-group">
          <label for="castrado" class="form-label">Castrado</label>
          <select
            id="castrado"
            name="castrado"
            class="form-input"
            [(ngModel)]="createPet.castrado"
          >
            <option [ngValue]="null">Selecione...</option>
            <option [ngValue]="true">Sim</option>
            <option [ngValue]="false">Não</option>
          </select>
        </div>

        <!-- Carteirinha -->
        <div class="form-group">
          <label for="possuiCarteirinha" class="form-label">
            Possui carteirinha?
          </label>
          <select
            id="possuiCarteirinha"
            name="possuiCarteirinha"
            class="form-input"
            [(ngModel)]="createPet.possuiCarteirinha"
          >
          <option [ngValue]="null">Selecione...</option>
            <option [ngValue]="false">Não</option>
            <option [ngValue]="true">Sim</option>
          </select>
        </div>

        <!-- Responsável  -->
        <div class="form-group form-group--full">
          <label for="user_id" class="form-label form-label--required">
            Responsável
          </label>
          <select
            id="user_id"
            name="user_id"
            class="form-input"
            [(ngModel)]="createPet.user_id"
            required
            aria-required="true"
          >
            <option [ngValue]="undefined">Selecione o responsável...</option>
            <option *ngFor="let tutor of tutores" [ngValue]="tutor.id">
              {{ tutor.name }} - {{ tutor.email }}
            </option>
          </select>
        </div>

        <!-- Caso clínico -->
        <div class="form-group form-group--full">
          <label for="caso_clinico" class="form-label">Caso clínico</label>
          <textarea
            id="caso_clinico"
            name="caso_clinico"
            class="form-input"
            rows="3"
            [(ngModel)]="createPet.caso_clinico"
            placeholder="Descreva brevemente o histórico do animal..."
          ></textarea>
        </div>
      </div>

      <!-- Buttons -->
      <div class="button-group">
        <button type="button" class="btn btn--secondary" (click)="onCancel()">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
          Cancelar
        </button>

        <button type="submit" class="btn btn--primary">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Cadastrar novo Animal
        </button>
      </div>

      <div class="loading-overlay" *ngIf="loading">
        <app-loading></app-loading>
      </div>
    </form>
  </div>
</div>
